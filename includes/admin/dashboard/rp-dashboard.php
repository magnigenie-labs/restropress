
<div class="rp-col-sm-12">
        <div class="sales-page-wrap">
            <div class="row">
                <div class="rp-col-sm-9 leftbg">
                    <div class="flex justify-content-space-between items-center page-header">
                        <h2 class="page-title"><?php echo __( 'Sales Overview','restropress' ); ?></h2>
                        <div class="year_select_wrap">                        
                            <div class="multi-column-select" data-mate-select="active">
                                <select id="rpress-dashboard-admin">
                                    <option value=""><?php echo __( 'This Year','restropress' ); ?></option>
                                    <option value="1"><?php echo __( 'Today','restropress' ); ?></option>
                                    <option value="2"><?php echo __( 'Yesterday','restropress' ); ?></option>
                                    <option value="3"><?php echo __( 'Last week','restropress' ); ?></option>
                                    <option value="4"><?php echo __( 'Last month','restropress' ); ?></option>
                                    <option value="5"><?php echo __( 'Last year','restropress' ); ?></option>
                                    <option value="6"><?php echo __( 'Custom','restropress' ); ?></option>
                                </select>
                                <p class="selecionado_opcion" onclick="open_select(this)"></p>
                                <span onclick="open_select(this)" class="arrow-icon_select">
                                    <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z" />
                                        <path d="M0-.75h24v24H0z" fill="none" />
                                    </svg>
                                </span>
                                <div class="list_multi-column-select">
                                    <ul class="list-multi-select-option"> </ul>
                                </div>
                            </div>                        
                        </div>                            
                    </div>
                    <div class="row">
                        <div class="rp-col-sm-3 rp-col-sm-6 pr8">
                            <div class="rp-sales-overview-box box">
                                <svg width="35" height="35" viewBox="0 0 35 35" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M3.3789 0.1087C2.20948 0.391499 1.01714 1.32397 0.497406 2.37873C-0.0376189 3.46407 0.000597126 2.34816 0.000597126 17.4359C0.000597126 26.9364 0.0235267 31.2166 0.0846724 31.4994C0.229893 32.2178 0.734345 33.1274 1.29994 33.7006C1.87318 34.2662 2.78272 34.7706 3.50119 34.9159C3.78399 34.977 7.40687 34.9999 15.2412 34.9999C27.6843 34.9999 27.1798 35.0152 28.6015 34.5414C30.0155 34.0675 31.1696 33.349 32.2626 32.256C34.0893 30.4293 35.0065 28.2051 35.0065 25.6294C35.0065 23.1377 34.074 20.8677 32.339 19.1021C31.3607 18.1085 30.2677 17.3823 29.0677 16.9238L28.5098 16.7097V10.3888C28.5098 6.18505 28.4792 3.92266 28.4257 3.61693C28.1276 1.98893 26.7518 0.529076 25.1085 0.1087C24.7111 0.00933838 23.3277 -0.00594711 14.217 0.00169373C5.9623 0.00933838 3.69991 0.0246239 3.3789 0.1087ZM24.8869 2.62331C25.0932 2.72268 25.3913 2.94433 25.5518 3.12777C26.0869 3.75451 26.0639 3.47171 26.0639 10.213V16.2741H25.5518C24.2372 16.2741 22.8003 16.6257 21.5162 17.2677C19.5596 18.2384 18.2449 19.553 17.2742 21.5097C15.524 25.0332 16.1354 29.1605 18.8487 32.0879L19.2768 32.5541H11.6947C5.97759 32.5541 4.02857 32.5312 3.79163 32.4624C3.37125 32.3401 2.66043 31.6293 2.53814 31.2089C2.40821 30.7656 2.40056 4.19017 2.53814 3.80801C2.72158 3.25006 3.21074 2.75325 3.77634 2.53924C3.95214 2.4781 6.61197 2.44752 14.2552 2.44752L24.4971 2.43988L24.8869 2.62331ZM27.3786 18.9416C30.9709 19.874 33.2103 23.5275 32.4078 27.1427C31.8193 29.8178 29.6562 31.9274 26.9811 32.4318C23.3735 33.1197 19.9112 30.9338 18.9405 27.3644C18.7188 26.5466 18.7035 24.8803 18.9099 24.0702C19.3685 22.2893 20.4232 20.8065 21.9519 19.8052C22.6168 19.3772 23.5875 18.9951 24.4512 18.8346C25.2155 18.6893 26.5913 18.7428 27.3786 18.9416Z"
                                        fill="#030043" />
                                    <path
                                        d="M7.31526 8.20287C6.94074 8.34044 6.8261 8.44745 6.63502 8.81432C6.35222 9.37228 6.53565 9.98373 7.1089 10.3659L7.36112 10.5417H13.3916C18.803 10.5417 19.4603 10.5264 19.6896 10.4194C20.0718 10.236 20.2781 9.89966 20.3164 9.40285C20.3546 8.86782 20.1482 8.52388 19.6438 8.26401L19.3075 8.09586H13.4528C8.75983 8.1035 7.5522 8.12643 7.31526 8.20287Z"
                                        fill="#4E4BF5" />
                                    <path
                                        d="M7.10892 14.8372C6.74205 15.0894 6.55861 15.3722 6.52039 15.7544C6.46689 16.1977 6.69619 16.6563 7.08599 16.8932L7.37643 17.0766L11.542 17.0996C13.8349 17.1148 15.8528 17.0996 16.0362 17.0766C16.4719 17.0155 16.9381 16.6028 17.0451 16.19C17.1903 15.6626 16.9152 15.0359 16.4336 14.7837C16.2426 14.6843 15.547 14.669 11.7866 14.669H7.36115L7.10892 14.8372Z"
                                        fill="#4E4BF5" />
                                    <path
                                        d="M27.6691 22.8549C27.5621 22.8931 26.8895 23.5199 26.1634 24.2383L24.8487 25.5529L24.3213 25.0485C23.7099 24.4523 23.3659 24.3147 22.8768 24.4447C22.2271 24.6205 21.8297 25.3084 22.0131 25.9427C22.0819 26.1797 22.3418 26.4854 23.1825 27.3338C24.0844 28.2357 24.3137 28.4268 24.5583 28.465C25.2232 28.5873 25.2615 28.5644 27.3022 26.5313C28.6245 25.2166 29.2206 24.567 29.2818 24.3912C29.4499 23.8714 29.2665 23.3211 28.8003 22.9772C28.5633 22.8014 27.9519 22.7326 27.6691 22.8549Z"
                                        fill="#030043" />
                                </svg>
                                <?php   $date           = date( 'Y-m-d' );
                                        $yesterday_date = date( "Y-m-d", strtotime( "-1 day" ) );
                                        
                                        $order_count                = get_today_order_count( $date );
                                        $orders_received_yesterday  = get_today_order_count( $yesterday_date );  
                                        $percentage_change = 0;
                                        if ( $orders_received_yesterday != 0) {

                                            $percentage_change = ( ( $order_count - $orders_received_yesterday )  / $orders_received_yesterday ) * 100;
                                  
                                        }

                                        function get_today_order_count( $date ) {
                                            global $wpdb;
                                            $query = $wpdb->prepare( "SELECT count(*) as count
                                                FROM {$wpdb->postmeta}
                                                WHERE `meta_key` = '_rpress_delivery_date'
                                                AND `meta_value` = %s
                                                GROUP BY meta_value", $date );
                                        
                                            $total_order_count = $wpdb->get_var( $query );
                                            return $total_order_count ? $total_order_count : 0;
                                        } ?>
                                <div class="rp-sale-no mt-1" id="total-order"> <?php echo $order_count; ?> </div>
                                <div class="flex items-center rp-sales-growth">
                                    <p><?php echo __( 'Total Orders','restropress' ); ?></p>
                                    <div class="rp-sales-growth-rate <?php echo ( $percentage_change < 0 ) ? 'rp-red' : 'rp-green'; ?>  ml-3" id="total-order-percentage">
                                        <?php if( !empty( $percentage_change ) && $percentage_change > 0 ) {
                                            ?>
                                            <svg width="14" height="8" viewBox="0 0 14 8" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M9.80976 0.664233V1.32844H10.3258H10.8444L9.01782 3.15499L7.19127 4.98155L5.8833 3.67358L4.57278 2.36306L2.28639 4.64945L0 6.93583L0.459832 7.39567L0.919665 7.8555L2.74622 6.02894L4.57278 4.20239L5.87053 5.50014C6.58327 6.21288 7.17849 6.79533 7.19127 6.79533C7.20404 6.79533 8.24377 5.76837 9.49554 4.51661L11.7768 2.23533V2.75392V3.26995H12.4282H13.0797V1.63499V3.09944e-05H11.4447H9.80976V0.664233Z"
                                                fill="#028614" />
                                            </svg> <?php
                                        } else if( !empty( $percentage_change ) && $percentage_change < 0 ) {
                                            ?>
                                            <svg width="14" height="8" viewBox="0 0 14 8" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M9.80976 7.19127V6.52706H10.3258H10.8444L9.01782 4.70051L7.19127 2.87395L5.8833 4.18192L4.57278 5.49244L2.28639 3.20605L0 0.919665L0.459832 0.459832L0.919665 0L2.74622 1.82656L4.57278 3.65311L5.87053 2.35536C6.58327 1.64262 7.17849 1.06017 7.19127 1.06017C7.20404 1.06017 8.24377 2.08713 9.49554 3.33889L11.7768 5.62017V5.10158V4.58555H12.4282H13.0797V6.22051V7.85547H11.4447H9.80976V7.19127Z"
                                                    fill="#FF2F41" />
                                            </svg> <?php
                                        } ?>
                                        
                                        <?php  
                                        if ( !empty( $percentage_change ) && $percentage_change > 0 ) {
                                            echo "+";
                                        } else {
                                            echo "";
                                        } ?>
                                        <?php echo number_format( !empty( $percentage_change ) , 2 ) . "%"; ?>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="rp-col-sm-3 rp-col-sm-6 pr8 pl8">
                            <div class="rp-sales-overview-box box">
                                <svg width="38" height="36" viewBox="0 0 38 36" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M23.0364 0.104276C21.9148 0.350686 20.8357 0.885993 20.0965 1.54875C19.5781 2.01608 19.4082 2.30498 19.4082 2.72983C19.4082 3.49455 20.2494 4.23378 20.9631 4.09783C21.1161 4.07234 21.5409 3.83443 21.9063 3.57952C22.7135 3.02722 23.3338 2.77231 24.09 2.71283C26.5626 2.50041 28.4404 4.25078 28.4404 6.76587C28.4404 8.23583 27.8541 9.40841 26.7326 10.1816C26.1972 10.5555 25.5685 10.7424 24.6338 10.8359C23.7161 10.9124 23.4612 11.0398 23.2148 11.5326C23.0194 11.9065 23.0194 12.5098 23.2148 12.8837C23.3083 13.0706 23.5207 13.2575 23.7501 13.3765C24.0815 13.5549 24.2005 13.5719 24.8462 13.5294C27.013 13.3935 28.9248 12.2804 30.1143 10.445C30.5392 9.79927 30.7856 9.22997 31.032 8.3378C31.2529 7.54758 31.2274 5.81421 30.981 4.95602C30.3268 2.65335 28.5424 0.885993 26.1887 0.214736C25.3476 -0.0146818 23.8181 -0.0741596 23.0364 0.104276Z"
                                        fill="#4E4BF5" />
                                    <path
                                        d="M12.3982 4.14036C9.43275 4.72665 7.32551 6.88486 6.82419 9.85879C6.48431 11.8471 7.25753 14.1497 8.7445 15.6452C10.053 16.9537 11.6334 17.5995 13.5453 17.5995C15.4571 17.5995 17.0375 16.9537 18.346 15.6452C19.6545 14.3367 20.3003 12.7562 20.3003 10.8444C20.3003 9.36597 19.9944 8.32084 19.2382 7.16526C18.2865 5.6953 16.9355 4.72665 15.1597 4.24232C14.5819 4.08938 12.9675 4.0299 12.3982 4.14036ZM14.5054 6.89336C15.2616 7.08879 15.8309 7.42017 16.4087 8.00646C18.0146 9.60388 18.0146 12.085 16.4002 13.6994C14.7858 15.3138 12.3132 15.3138 10.6903 13.6909C9.05888 12.068 9.05888 9.62087 10.6903 7.98946C11.7354 6.94434 13.1459 6.53649 14.5054 6.89336Z"
                                        fill="#030043" />
                                    <path
                                        d="M29.3496 15.0419C29.1882 15.1098 28.7463 15.2968 28.364 15.4667C27.5823 15.8151 26.6986 16.0615 25.7384 16.1889C24.6678 16.3419 24.2515 16.7327 24.2515 17.6164C24.2515 18.3981 24.7868 18.9165 25.5855 18.9165C26.5116 18.9165 28.398 18.4491 29.664 17.8968C30.0549 17.7354 30.1398 17.7184 30.4287 17.8119C31.5928 18.1857 32.7399 19.1544 33.2497 20.208C33.5896 20.9132 35.34 27.6428 35.2635 27.9572C35.1445 28.433 34.9491 28.4755 32.6124 28.518C30.6157 28.5605 30.4542 28.569 30.2333 28.7389C29.8509 29.0193 29.6895 29.2997 29.6385 29.75C29.596 30.0984 29.63 30.2429 29.7915 30.5487C30.1483 31.2115 30.2588 31.237 32.7059 31.237C34.9576 31.237 35.4334 31.1775 36.1557 30.8037C37.3197 30.2174 38.093 28.8494 37.991 27.5918C37.923 26.7251 36.1217 19.9361 35.7648 19.1799C35.3569 18.3217 34.8386 17.6249 34.1079 16.9282C33.1138 15.9935 31.8392 15.2798 30.7261 15.0419C30.0209 14.8974 29.732 14.8974 29.3496 15.0419Z"
                                        fill="#4E4BF5" />
                                    <path
                                        d="M7.17255 19.1289C6.4928 19.2818 5.36271 19.8171 4.67446 20.31C3.61234 21.0662 2.68618 22.2048 2.14237 23.4113C1.99792 23.7172 1.46262 25.5951 0.944306 27.5833C0.10311 30.7867 0.00114687 31.2795 0.00114687 31.9168C-0.00735005 32.554 0.0266377 32.707 0.264552 33.2083C0.587435 33.8881 1.19072 34.5253 1.81099 34.8397C2.77964 35.3325 2.31231 35.3155 13.5198 35.3155C20.8271 35.3155 23.9455 35.2901 24.2684 35.2221C24.8292 35.1031 25.5854 34.7208 26.0017 34.3639C26.6645 33.7776 27.1403 32.7495 27.1403 31.8828C27.1403 31.152 25.3135 24.1591 24.8886 23.2584C23.8775 21.1427 21.6683 19.4008 19.5526 19.0694C18.8388 18.959 18.7369 18.9844 17.4878 19.5452C14.9133 20.6923 11.5995 20.5989 9.02488 19.2903C8.48958 19.0184 7.88629 18.9675 7.17255 19.1289ZM8.76148 22.1453C11.8459 23.3774 15.2446 23.3774 18.3715 22.1283L19.2637 21.7714L19.697 21.9244C20.7761 22.3067 21.8892 23.2839 22.3736 24.2865C22.535 24.6264 22.9513 26.0964 23.5376 28.3736L24.4468 31.9253L24.2769 32.1547C24.1834 32.2821 24.0135 32.4351 23.903 32.4861C23.7416 32.571 21.4814 32.588 13.4433 32.571L3.18749 32.554L2.93259 32.3076C2.78814 32.1632 2.66918 32.0017 2.66918 31.9423C2.66918 31.8743 3.06854 30.2429 3.56136 28.3226C4.13915 26.0709 4.5555 24.6349 4.71694 24.2865C5.00584 23.7002 5.72807 22.8675 6.29737 22.4682C6.70522 22.1963 7.55491 21.8139 7.77583 21.8054C7.85231 21.8054 8.29415 21.9584 8.76148 22.1453Z"
                                        fill="#030043" />
                                </svg>
                                    <?php 
                                        global $wpdb;
                                        $today_date         = date( 'Y-m-d' );
                                        $yesterday_date     = date( "Y-m-d", strtotime( "-1 day" ) );
                                        $table_name         = $wpdb->prefix . 'rpress_customers';
                                        
                                        $query_today = $wpdb->prepare("
                                            SELECT COUNT(*) 
                                            FROM $table_name 
                                            WHERE DATE(date_created) LIKE %s", 
                                            array( "$today_date%" )
                                        );
                                    
                                        $customer_count = $wpdb->get_var( $query_today );
                                
                                        $query_yesterday = $wpdb->prepare("
                                            SELECT COUNT(*) 
                                            FROM $table_name 
                                            WHERE DATE(date_created) LIKE %s", 
                                            array( "$yesterday_date%" )
                                        );
                                    
                                        $customer_count_yesterday = $wpdb->get_var( $query_yesterday );
                                
                                        $percentage_change_customer = 0;
                                        if ( $customer_count_yesterday != 0 ) {
                                        $percentage_change_customer = (  ( $customer_count - $customer_count_yesterday )  / $customer_count_yesterday ) * 100;
                                        }  ?>
                                <div class="rp-sale-no mt-1" id="total-customer" ><?php echo $customer_count; ?> </div>
                                <div class="flex items-center rp-sales-growth">
                                    <p><?php echo __( 'Customer','restropress' ); ?></p>
                                    <div class="rp-sales-growth-rate <?php echo ( $percentage_change_customer < 0 ) ? 'rp-red' : 'rp-green'; ?>  ml-3" id="total-customer-percentage">
                                        <?php if( $percentage_change_customer > 0 ) {
                                            ?>
                                            <svg width="14" height="8" viewBox="0 0 14 8" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M9.80976 0.664233V1.32844H10.3258H10.8444L9.01782 3.15499L7.19127 4.98155L5.8833 3.67358L4.57278 2.36306L2.28639 4.64945L0 6.93583L0.459832 7.39567L0.919665 7.8555L2.74622 6.02894L4.57278 4.20239L5.87053 5.50014C6.58327 6.21288 7.17849 6.79533 7.19127 6.79533C7.20404 6.79533 8.24377 5.76837 9.49554 4.51661L11.7768 2.23533V2.75392V3.26995H12.4282H13.0797V1.63499V3.09944e-05H11.4447H9.80976V0.664233Z"
                                                fill="#028614" />
                                            </svg> <?php
                                        } else if( $percentage_change_customer < 0 ) {
                                            ?>
                                            <svg width="14" height="8" viewBox="0 0 14 8" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M9.80976 7.19127V6.52706H10.3258H10.8444L9.01782 4.70051L7.19127 2.87395L5.8833 4.18192L4.57278 5.49244L2.28639 3.20605L0 0.919665L0.459832 0.459832L0.919665 0L2.74622 1.82656L4.57278 3.65311L5.87053 2.35536C6.58327 1.64262 7.17849 1.06017 7.19127 1.06017C7.20404 1.06017 8.24377 2.08713 9.49554 3.33889L11.7768 5.62017V5.10158V4.58555H12.4282H13.0797V6.22051V7.85547H11.4447H9.80976V7.19127Z"
                                                    fill="#FF2F41" />
                                            </svg> <?php
                                        } ?>
                                        
                                        <?php  
                                        if ( $percentage_change_customer > 0 ) {
                                            echo "+";
                                        } else {
                                            echo "";
                                        } ?>
                                        <?php echo number_format( $percentage_change_customer, 2 ) . "%"; ?>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="rp-col-sm-3 rp-col-sm-6 pr8 pl8">
                            <div class="rp-sales-overview-box box">
                                <svg width="35" height="35" viewBox="0 0 35 35" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M16.2354 0.0342484C12.1475 0.382881 8.45605 2.01667 5.50977 4.77839C3.15137 6.9864 1.33301 10.1241 0.546875 13.3301C0.157227 14.9092 0.102539 15.4425 0.102539 17.4864C0.102539 19.5303 0.157227 20.0635 0.546875 21.6426C1.14844 24.0899 2.39941 26.6124 3.95117 28.5059C4.22461 28.8409 4.44336 29.1212 4.44336 29.1348C4.44336 29.1485 4.23828 29.169 3.97852 29.1895C3.43164 29.2169 3.14453 29.3878 2.93945 29.7911C2.58398 30.4815 3.02148 31.3565 3.77344 31.4659C3.9375 31.4932 4.8877 31.5001 5.88574 31.4864C7.67676 31.4659 7.7041 31.4659 7.94336 31.3018C8.07324 31.213 8.25781 31.0284 8.34668 30.8985C8.51074 30.6592 8.51074 30.6319 8.53125 28.8409C8.54492 27.8428 8.53809 26.8926 8.51074 26.7286C8.40137 25.9766 7.52637 25.5391 6.83594 25.8946C6.41211 26.1133 6.26172 26.38 6.2207 27.0225L6.18652 27.5694L5.79004 27.0909C4.58008 25.6417 3.53418 23.6319 3.00781 21.7383C2.59766 20.2823 2.46094 19.2364 2.46094 17.6026C2.46094 14.5401 3.26758 11.8673 4.95605 9.31745C8.50391 3.97175 14.9844 1.4903 21.2256 3.09675C26.5371 4.4571 30.666 8.62702 32.0264 13.9932C32.2998 15.0733 32.4092 15.88 32.4502 17.1173C32.5391 19.6807 32.0605 21.9229 30.9326 24.2198C29.4355 27.2823 27.1455 29.5792 24.0967 31.0899C20.8975 32.6758 17.1035 33.0792 13.7402 32.1837C12.8242 31.9444 12.4209 32.0401 12.0518 32.587C11.7578 33.0245 11.8877 33.7969 12.3047 34.0977C12.4072 34.1729 12.79 34.3096 13.166 34.4053C17.3906 35.5059 21.875 35.0001 25.6895 33.004C29.9414 30.7686 33.1064 26.9063 34.4189 22.3331C34.9316 20.5557 34.9658 20.2618 34.9658 17.4864C34.9658 15.1553 34.9521 14.9434 34.8086 14.2188C34.1182 10.8077 32.5732 7.82722 30.2354 5.37995C28.8135 3.89655 27.166 2.70026 25.3271 1.79792C23.2832 0.799873 21.3896 0.26667 19.1064 0.0547562C18.4092 -0.00676727 16.8711 -0.0204391 16.2354 0.0342484Z"
                                        fill="#030043" />
                                    <path
                                        d="M8.64757 10.3907C7.69053 10.5684 6.65831 11.3546 6.22764 12.2296C5.81065 13.0772 5.80382 13.2481 5.82432 17.753L5.84483 21.8272L6.02257 22.2852C6.49424 23.4952 7.36924 24.2813 8.5587 24.5616C9.20128 24.712 25.7989 24.712 26.4415 24.5616C27.631 24.2813 28.506 23.4952 28.9776 22.2852L29.1554 21.8272L29.1759 17.753C29.1964 13.2481 29.1896 13.0772 28.7726 12.2296C28.4991 11.6827 27.8565 11.0264 27.296 10.7325C26.4689 10.295 26.797 10.3087 17.4659 10.3155C12.4483 10.3223 8.85264 10.3497 8.64757 10.3907ZM26.2638 12.8243C26.4005 12.9131 26.5851 13.0977 26.6739 13.2344L26.8312 13.4874L26.8517 17.336C26.8653 19.8858 26.8448 21.2735 26.797 21.4512C26.7013 21.8135 26.4415 22.1006 26.0929 22.2374C25.8331 22.3331 24.9581 22.3399 17.3907 22.3262L8.98253 22.3057L8.68858 22.1143C8.10069 21.7247 8.13487 22.0049 8.13487 17.5001C8.13487 14.2051 8.14854 13.4805 8.23057 13.3301C8.36046 13.0772 8.67491 12.8038 8.921 12.7149C9.06456 12.6671 11.7989 12.6465 17.5685 12.6534L26.0108 12.6671L26.2638 12.8243Z"
                                        fill="#030043" />
                                    <path
                                        d="M17.0078 13.7403C15.5586 13.9044 14.3281 14.9503 13.8701 16.3926C13.6992 16.9532 13.6855 17.9649 13.8496 18.5118C14.2119 19.7491 15.2373 20.7745 16.4677 21.1368C16.9462 21.2735 17.958 21.2803 18.4912 21.1436C19.7421 20.8155 20.8222 19.7286 21.1572 18.4708C21.2939 17.9581 21.2939 17.0215 21.1572 16.502C20.8564 15.3604 19.9404 14.3555 18.8261 13.9385C18.3476 13.754 17.5957 13.6788 17.0078 13.7403ZM18.1972 16.2354C18.8945 16.6182 19.1406 17.4727 18.7509 18.1837C18.2177 19.1612 16.8164 19.168 16.2627 18.2042C15.5312 16.9395 16.9121 15.5381 18.1972 16.2354Z"
                                        fill="#4E4BF5" />
                                </svg>
                                <?php
                                    $today_date         = date( 'Y-m-d' );
                                    $yesterday_date     = date( "Y-m-d", strtotime( "-1 day" ) );
                                    $args_today = array(
                                        'post_type'      => 'rpress_payment',
                                        'post_status'    => 'refunded',
                                        'posts_per_page' => -1,
                                        'meta_query'     => array(
                                            array(
                                                'key'     => '_rpress_delivery_date',
                                                'value'   => $today_date,
                                                'compare' => '=' // Exact match for today's date
                                            )
                                        )
                                    );
                            
                                
                                    $args_yesterday = array(
                                        'post_type'      => 'rpress_payment',
                                        'post_status'    => 'refunded',
                                        'posts_per_page' => -1,
                                        'meta_query'     => array(
                                            array(
                                                'key'     => '_rpress_delivery_date',
                                                'value'   => $yesterday_date,
                                                'compare' => '=' // Exact match for yesterday's date
                                            )
                                        )
                                    );
                            
                                    $query_today      = new WP_Query( $args_today );
                                    $query_yesterday  = new WP_Query( $args_yesterday );
                            
                                    $total_refund_today = 0;
                                    $total_refund_yesterday = 0;
                            
                                    if ( $query_today->have_posts() ) {
                                        while ( $query_today->have_posts() ) {
                                            $query_today->the_post();
                                            $post_id        = get_the_ID();
                                            $payment        = new RPRESS_Payment($post_id);
                                            $amount         = $payment->total;
                                            $total_refund_today  += $amount;
                                        }
                                        wp_reset_postdata();
                                    }
                            
                                    
                                    if ( $query_yesterday->have_posts() ) {
                                        while ( $query_yesterday->have_posts() ) {
                                            $query_yesterday->the_post();
                                            $post_id          = get_the_ID();
                                            $payment          = new RPRESS_Payment( $post_id );
                                            $amount           = $payment->total;
                                            $total_refund_yesterday += $amount;
                                        }
                                        wp_reset_postdata();
                                    }
                                    
                                    $total_refund_percentage = 0;
                                    if ( $total_refund_yesterday != 0 ) {
                                        $total_refund_percentage = ( ( $total_refund_today - $total_refund_yesterday ) / $total_refund_yesterday ) * 100;
                                    }
                                ?>
                                <div class="rp-sale-no mt-1" id="total-refund"><?php echo rpress_currency_filter( $total_refund_today ); ?> </div>
                                <div class="flex items-center rp-sales-growth">
                                    <p><?php echo __( 'Total Refund','restropress' ); ?></p>
                                    <div class="rp-sales-growth-rate <?php echo ( $total_refund_percentage < 0 ) ? 'rp-red' : 'rp-green'; ?>  ml-3" id="total-refund-percentage">
                                        <?php if( $total_refund_percentage > 0 ) {
                                            ?>
                                            <svg width="14" height="8" viewBox="0 0 14 8" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M9.80976 0.664233V1.32844H10.3258H10.8444L9.01782 3.15499L7.19127 4.98155L5.8833 3.67358L4.57278 2.36306L2.28639 4.64945L0 6.93583L0.459832 7.39567L0.919665 7.8555L2.74622 6.02894L4.57278 4.20239L5.87053 5.50014C6.58327 6.21288 7.17849 6.79533 7.19127 6.79533C7.20404 6.79533 8.24377 5.76837 9.49554 4.51661L11.7768 2.23533V2.75392V3.26995H12.4282H13.0797V1.63499V3.09944e-05H11.4447H9.80976V0.664233Z"
                                                fill="#028614" />
                                            </svg> <?php
                                        } else if( $total_refund_percentage < 0 ) {
                                            ?>
                                            <svg width="14" height="8" viewBox="0 0 14 8" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M9.80976 7.19127V6.52706H10.3258H10.8444L9.01782 4.70051L7.19127 2.87395L5.8833 4.18192L4.57278 5.49244L2.28639 3.20605L0 0.919665L0.459832 0.459832L0.919665 0L2.74622 1.82656L4.57278 3.65311L5.87053 2.35536C6.58327 1.64262 7.17849 1.06017 7.19127 1.06017C7.20404 1.06017 8.24377 2.08713 9.49554 3.33889L11.7768 5.62017V5.10158V4.58555H12.4282H13.0797V6.22051V7.85547H11.4447H9.80976V7.19127Z"
                                                    fill="#FF2F41" />
                                            </svg> <?php
                                        } ?>
                                        
                                        <?php  
                                        if ( $total_refund_percentage > 0 ) {
                                                    echo "+";
                                                } else {
                                                    echo "";
                                                } ?>
                                        <?php echo number_format( $total_refund_percentage, 2 ) . "%"; ?>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="rp-col-sm-3 rp-col-sm-6 pl8">
                            <div class="rp-sales-overview-box box">
                                <svg width="35" height="36" viewBox="0 0 35 36" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M31.5044 0.132068C31.3585 0.205036 30.1271 1.37252 28.7681 2.73155L26.3054 5.20334L26.2598 3.79871C26.2233 2.55825 26.196 2.35759 26.0227 2.13869C25.667 1.65527 25.3751 1.50934 24.8005 1.50934C24.2258 1.50934 23.934 1.65527 23.5783 2.13869C23.3958 2.38495 23.3867 2.4944 23.3867 5.83269V9.28042L23.633 9.59965C24.1073 10.229 24.1346 10.229 27.8469 10.2016C31.0392 10.1743 31.1852 10.1652 31.4223 9.98273C31.9057 9.62702 32.0517 9.33514 32.0517 8.76052C32.0517 8.1859 31.9057 7.89403 31.4223 7.53831C31.2034 7.36501 31.021 7.34677 29.7532 7.31941L28.3303 7.29204L30.8933 4.71992C33.1006 2.50352 33.4563 2.1022 33.511 1.80121C33.739 0.597239 32.5898 -0.360465 31.5044 0.132068Z"
                                        fill="#4E4BF5" />
                                    <path
                                        d="M15.1412 0.241566C11.5201 0.734097 8.16361 2.33939 5.49116 4.8659C-0.00879476 10.0649 -1.55936 18.2281 1.66947 25.0415C3.09234 28.0423 5.13544 30.3864 7.92646 32.2289C13.9828 36.2239 22.0093 36.005 27.8741 31.6907C31.8782 28.7355 34.4503 24.2024 34.9337 19.2041C35.1252 17.2796 34.879 14.3061 34.4868 13.7771C34.3956 13.6494 34.1767 13.4488 34.0034 13.3393C33.748 13.1569 33.602 13.1295 33.1825 13.1569C32.5805 13.2025 32.1883 13.4488 31.9603 13.923C31.787 14.2879 31.7961 14.598 32.0059 16.331C32.544 20.6635 30.4735 25.6709 26.9164 28.6534C24.9189 30.3226 22.5839 31.4171 20.0118 31.8914C18.744 32.1285 16.263 32.1285 14.9952 31.8914C11.6113 31.2712 8.50109 29.4834 6.36677 26.9296C4.71588 24.9503 3.67608 22.7795 3.16531 20.2074C2.87344 18.7845 2.87344 16.2763 3.16531 14.826C4.34192 8.91562 8.69263 4.50106 14.5848 3.23325C15.4239 3.05083 16.0259 2.98698 17.5673 2.94138C19.3186 2.88665 19.5192 2.85929 19.7473 2.68599C20.2124 2.33939 20.3766 2.0384 20.3766 1.50938C20.3766 0.962124 20.1942 0.642887 19.6925 0.296291C19.4098 0.104752 19.3095 0.0956306 17.7406 0.104752C16.8285 0.113873 15.6611 0.168598 15.1412 0.241566Z"
                                        fill="#030043" />
                                    <path
                                        d="M16.9104 7.42887C16.2354 7.73898 16.0439 8.18591 16.0439 9.43549V10.3658L15.4054 10.5209C14.4112 10.758 13.6177 11.1867 12.9336 11.8617C11.2918 13.4852 11.2645 15.5739 12.8607 17.2887C13.864 18.3558 15.1318 18.8301 17.3299 18.9669C19.1085 19.0855 19.7926 19.35 20.2943 20.1162C20.6226 20.6087 20.0662 21.3566 19.1359 21.6758C18.4336 21.9221 16.5729 21.9221 15.8706 21.6758C15.2139 21.4478 14.694 20.9735 14.621 20.5448C14.5207 19.9064 14.393 19.6236 14.0829 19.35C13.2985 18.6659 12.0398 19.0125 11.7388 19.9976C11.5928 20.4992 11.757 21.3931 12.131 22.1501C12.6965 23.2629 14.1285 24.3118 15.4419 24.5763L15.9983 24.6949L16.0439 25.7529C16.0895 26.8931 16.1716 27.0937 16.7188 27.495C17.0746 27.7595 17.9319 27.7595 18.2876 27.495C18.8349 27.0937 18.917 26.8931 18.9626 25.7529L19.0082 24.704L19.674 24.5307C21.6533 24.0291 22.985 22.7339 23.2768 21.0191C23.4684 19.8881 23.0762 18.7389 22.1458 17.7447C21.1425 16.6684 19.8747 16.2033 17.6309 16.0573C16.883 16.0117 16.1351 15.9388 15.98 15.884C15.4693 15.7381 14.9494 15.3915 14.7669 15.0905C14.0737 13.9869 15.6426 13.0292 17.9046 13.166C19.3274 13.2481 20.2578 13.7497 20.3763 14.4885C20.4858 15.127 20.6135 15.4097 20.9236 15.6834C21.48 16.1759 22.2826 16.1668 22.839 15.6834C23.2768 15.2912 23.4045 14.8351 23.2768 14.0781C22.985 12.3724 21.5256 10.9678 19.5919 10.5118L18.9808 10.3658L18.9444 9.29867C18.917 8.14031 18.844 7.94877 18.3059 7.54744C17.9958 7.31942 17.2752 7.25557 16.9104 7.42887Z"
                                        fill="#030043" />
                                </svg>
                                <?php
                                $today_date         = date( 'Y-m-d' );
                                $yesterday_date     = date( "Y-m-d", strtotime( "-1 day" ) );
                                $args_today = array(
                                    'post_type'      => 'rpress_payment',
                                    'post_status'    => 'publish',
                                    'posts_per_page' => -1,
                                    'meta_query'     => array(
                                        array(
                                            'key'     => '_rpress_delivery_date',
                                            'value'   => $today_date,
                                            'compare' => '=' // Exact match for today's date
                                        )
                                    )
                                  );
                            
                                  $args_yesterday = array(
                                      'post_type'      => 'rpress_payment',
                                      'post_status'    => 'publish',
                                      'posts_per_page' => -1,
                                      'meta_query'     => array(
                                          array(
                                              'key'     => '_rpress_delivery_date',
                                              'value'   => $yesterday_date,
                                              'compare' => '=' // Exact match for yesterday's date
                                          )
                                      )
                                  );
                            
                                  $query_today      = new WP_Query( $args_today );
                                  $query_yesterday  = new WP_Query( $args_yesterday );
                            
                                  $total_today_sales = 0;
                                  $total_sales_yesterday = 0;
                            
                                  if ( $query_today->have_posts() ) {
                                      while ( $query_today->have_posts() ) {
                                          $query_today->the_post();
                                          $post_id          = get_the_ID();
                                          $payment          = new RPRESS_Payment( $post_id );
                                          $amount           = $payment->total;
                                          $total_today_sales += $amount;
                                      }
                                      wp_reset_postdata();
                                  }
                            
                                  
                                  if ( $query_yesterday->have_posts() ) {
                                      while ( $query_yesterday->have_posts() ) {
                                          $query_yesterday->the_post();
                                          $post_id          = get_the_ID();
                                          $payment          = new RPRESS_Payment( $post_id );
                                          $amount           = $payment->total;
                                          $total_sales_yesterday += $amount;
                                      }
                                      wp_reset_postdata();
                                  }
                                  
                                  $total_sales_percentage = 0;
                                  if ( $total_sales_yesterday != 0 ) {
                                      $total_sales_percentage = ( ( $total_today_sales - $total_sales_yesterday ) / $total_sales_yesterday ) * 100;
                                  }
                                ?>
                                <div class="rp-sale-no mt-1" id="total-sales"><?php echo rpress_currency_filter($total_today_sales); ?>
							    </div>
                                <div class="flex items-center rp-sales-growth">
                                    <p><?php echo __( 'Total Sales','restropress' ); ?></p>
                                    <div class="rp-sales-growth-rate <?php echo ( $total_sales_percentage < 0 ) ? 'rp-red' : 'rp-green'; ?>  ml-3" id="total-sales-percentage">
                                    <?php if( $total_sales_percentage > 0 ) {
                                        ?>
                                        <svg width="14" height="8" viewBox="0 0 14 8" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M9.80976 0.664233V1.32844H10.3258H10.8444L9.01782 3.15499L7.19127 4.98155L5.8833 3.67358L4.57278 2.36306L2.28639 4.64945L0 6.93583L0.459832 7.39567L0.919665 7.8555L2.74622 6.02894L4.57278 4.20239L5.87053 5.50014C6.58327 6.21288 7.17849 6.79533 7.19127 6.79533C7.20404 6.79533 8.24377 5.76837 9.49554 4.51661L11.7768 2.23533V2.75392V3.26995H12.4282H13.0797V1.63499V3.09944e-05H11.4447H9.80976V0.664233Z"
                                            fill="#028614" />
                                        </svg> <?php
                                    } else if( $total_sales_percentage < 0 ) {
                                        ?>
                                        <svg width="14" height="8" viewBox="0 0 14 8" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M9.80976 7.19127V6.52706H10.3258H10.8444L9.01782 4.70051L7.19127 2.87395L5.8833 4.18192L4.57278 5.49244L2.28639 3.20605L0 0.919665L0.459832 0.459832L0.919665 0L2.74622 1.82656L4.57278 3.65311L5.87053 2.35536C6.58327 1.64262 7.17849 1.06017 7.19127 1.06017C7.20404 1.06017 8.24377 2.08713 9.49554 3.33889L11.7768 5.62017V5.10158V4.58555H12.4282H13.0797V6.22051V7.85547H11.4447H9.80976V7.19127Z"
                                                fill="#FF2F41" />
                                        </svg> <?php
                                    } ?>
                                        
                                        <?php  
                                        if ( $total_sales_percentage > 0 ) {
                                                    echo "+";
                                                } else {
                                                    echo "";
                                                } ?>
                                        <?php echo number_format( $total_sales_percentage, 2 ) . "%"; ?>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-25">                    
                        <div class="rp-col-sm-3 rp-col-sm-6">
                            <div class="today-sale-wrap box">
                                <p><?php echo __( 'Today sales','restropress' ); ?></p>
                                <div class="flex items-center rp-sales-growth mt-1">
                                    <?php
                                    $today_sales_totals = 0;
                                    $today_date = date( "Y-m-d" );
                                    $yesterday_date = date( "Y-m-d", strtotime( "-1 day" ) );
                                    $today_sales = RPRESS()->payment_stats->get_sales_by_range( 'other', true, $today_date );
                                    $yesterday_sales = RPRESS()->payment_stats->get_sales_by_range( 'other', true, $yesterday_date );
                                    
                                    $temp_data = array(
                                        'sales' => array(),
                                    );
                                    
                                    foreach ( $today_sales as $today_sale ) {
                                        $temp_data['sales'][$today_sale['y']][$today_sale['m']][$today_sale['d']] = $today_sale['count'];
                                        $today_sales_totals += $today_sale['count'];
                                    }
                                    
                                    $yesterday_sales_totals = 0;
                                    foreach ( $yesterday_sales as $yesterday_sale ) {
                                        $yesterday_sales_totals += $yesterday_sale[ 'count' ];
                                    }

                                    $percentage_change = 0;
                                    if ( $yesterday_sales_totals != 0 ) {
                                        $percentage_change = ( ($today_sales_totals - $yesterday_sales_totals ) / $yesterday_sales_totals ) * 100;
                                    } 
                                    ?>
                                    <div class="rp-sale-no"><?php echo $today_sales_totals;  ?></div>
                                    <div class="rp-sales-growth-rate <?php echo ( $percentage_change < 0 ) ? 'rp-red' : 'rp-green'; ?> ml-auto">
                                        <?php if ( $percentage_change > 0 ) {
                                                    echo "+";
                                                } else {
                                                    echo "";
                                                } ?>
                                        <?php echo number_format( $percentage_change, 2 ) . "%"; ?>
                                    </div>

                                </div>
                            </div>
                            <div class="today-sale-wrap box mt-5">
                                <p><?php echo __( 'Order received','restropress' ); ?></p>
                                <div class="flex items-center rp-sales-growth mt-1">
                                    <?php
                                    
                                        $today_date = date( "Y-m-d" );
                                        $yesterday_date = date( "Y-m-d", strtotime( "-1 day" ) );

                                        function get_order_count( $date ) {
                                            $args = array(
                                                'post_type' => 'rpress_payment',
                                                'posts_per_page' => -1,
                                                'date_query' => array(
                                                    array(
                                                        'year' => date( 'Y', strtotime( $date ) ),
                                                        'month' => date( 'm', strtotime( $date ) ),
                                                        'day' => date( 'd', strtotime( $date ) ),
                                                    ),
                                                ),
                                            );
                                            $query = new WP_Query( $args );
                                            $order_count = 0;
                                            if ( $query->have_posts() ) {
                                                $order_count = $query->post_count;
                                            }
                                            wp_reset_postdata();
                                            return $order_count;
                                        }

                                        
                                        $orders_received_today = get_order_count( $today_date );
                                        $orders_received_yesterday = get_order_count( $yesterday_date );
                                        $percentage_change = 0;
                                        if ( $orders_received_yesterday != 0 ) {
                                            $percentage_change = ( ($orders_received_today - $orders_received_yesterday  ) / $orders_received_yesterday ) * 100;
                                        }

                                    ?>

                                    <div class="rp-sale-no"><?php echo $orders_received_today;  ?> </div>
                                    <div class="rp-sales-growth-rate <?php echo ( $percentage_change < 0 ) ? 'rp-red' : 'rp-green'; ?> ml-auto">
                                    <?php if ( $percentage_change > 0 ) {
                                                    echo "+";
                                                } else {
                                                    echo "";
                                                } ?>
                                    <?php echo number_format( $percentage_change, 2) . "%"; ?>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="rp-col-sm-9 rp-col-sm-9">
                        <div class="revenue-wrap box">
                            <div class="flex justify-content-space-between">
                                <h5 class="card-title"><?php echo __( 'Revenue','restropress' ); ?></h5>
                                <div class="mt-3 flex items-center sm:ml-auto sm:mt-0">
                                    <span><?php echo __( 'Sort by:','restropress' ); ?></span>
                                    <select id="revenue-graph-selecter">
                                        <option value="monthly"><?php echo __( 'Monthly','restropress' ); ?></option>
                                        <option value="weekly"><?php echo __( 'Weekly','restropress' ); ?></option>
                                        <option value="yearly"><?php echo __( 'Yearly','restropress' ); ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="revenue-graph-wrap mt-5" id="revenue-graph-container" style="height: 300px;">
                            
                            </div>
                        </div>
                        </div>
                    </div>
                    <div class="row mt-25">
                    <div class="rp-col-sm-12">
                        <div class="flex justify-content-space-between items-center page-header">
                            <h2 class="page-title"><?php echo __( 'Last Orders','restropress' ); ?></h2>
                            <a href="<?php echo esc_url( home_url( '/wp-admin/admin.php?page=rpress-payment-history' ) );?>" class="see-all-order"><?php echo __( 'See All','restropress' ); ?></a>                                                      
                        </div>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th class="text-align-left"><?php echo __( 'Order','restropress' ); ?></th>
                                        <th class="text-align-right"><?php echo __( 'Status','restropress' ); ?></th>
                                        <th class="text-align-right"><?php echo __( 'Product(s)','restropress' ); ?></th>
                                        <th class="text-align-right"><?php echo __( 'Category','restropress' ); ?></th>
                                        <th class="text-align-right"><?php echo __( 'Price','restropress' ); ?></th>
                                        <th class="text-align-center">&nbsp;</th>
                                    </tr>
                                </thead>
                                <tbody>
                                   <?php
                                       $args = array(
                                          'post_type'      => 'rpress_payment',
                                          'posts_per_page' => 10,
                                        );
                                        $orders_query = new WP_Query( $args );
                                        $count = 0; 
                                        if ( $orders_query->have_posts() ) :
                                        while ($orders_query->have_posts() && $count < 10) :
                                        $orders_query->the_post();
                                        $order_id           = get_the_ID();
                                        $order = get_post($order_id);
                                        if ($order) { 
                                            $post_created_time  = strtotime($order->post_date);
                                            $current_time       = current_time('timestamp');
                                            $time_difference    = $current_time - $post_created_time;
                                            $time_difference_hours = floor($time_difference / (60 * 60)); 
                                            $time_difference_minutes = round(($time_difference - ($time_difference_hours * 3600)) / 60); // Calculate remaining minutes
                                            $time_display = ($time_difference_hours > 0) ? "$time_difference_hours hours" : "$time_difference_minutes minutes"; // Construct display string
                                            if ($time_difference_hours >= 24) {
                                                $time_display = "yesterday";
                                            }
                                        }
                                        $order_status       = rpress_get_order_status( $order_id );
                                        $payment            = new RPRESS_Payment($order_id);
                                        $cart_items         = $payment->cart_details;
                                        $all_product_names  = [];
                                        foreach ( $cart_items as $key => $cart_item ) :
                                         $item_id   = isset( $cart_item[ 'id' ] ) ? $cart_item[ 'id' ] : $cart_item;
                                         $fooditem          = new RPRESS_Fooditem($item_id);
                                         $product_name      = !empty($fooditem->ID) ? $fooditem->get_name() : '';
                                         $all_product_names[] = esc_html($product_name);
                                         $category_names    = '';
                                         $category_terms    = get_the_terms($item_id, 'food-category');
                                        if (    !empty( $category_terms ) && is_array( $category_terms ) ) {
                                         foreach ( $category_terms as $category_term ) {
                                            $category_names .= '<span class="rp-food-category">' . esc_html( $category_term->name ) . '</span><br>';
                                         }
                                        }
                                        endforeach;
                                        $order_amount   = rpress_currency_filter( rpress_get_payment_amount( $order_id ) );
                                        $payment_status = get_post_status ($order_id);
                                        $payment_status = ($payment_status === 'publish') ? '<span class="paid">Paid</span>' : '<span class="unpaid">Unpaid</span>';
                                    ?>
                                    <tr>
                                      <td class="d-flex text-align-left">
                                      <h6 class="rp-order-id">#<?php echo esc_html( $order_id ); ?></h6>
                                      <small class="rp-order-time"><?php echo esc_html(  $time_display); ?></small>
                                      </td>
                                      <td class="text-align-right">
                                        <?php 
                                            $capitalized_order_status = ucfirst($order_status); // Capitalize the first letter of order status
                                            if ($capitalized_order_status === 'Completed') : ?>
                                                <i class="fa-solid fa-circle sale-status sale-status-completed"></i>
                                            <?php elseif ($capitalized_order_status === 'Accepted') : ?>
                                                <i class="fa-solid fa-circle sale-status sale-status-Accepted"></i>    
                                            <?php elseif ($capitalized_order_status === 'Pending') : ?>
                                                <i class="fa-solid fa-circle sale-status sale-status-Pending"></i>
                                            <?php elseif ($capitalized_order_status === 'Processing') : ?>
                                                <i class="fa-solid fa-circle sale-status sale-status-processing"></i>
                                            <?php elseif ($capitalized_order_status === 'Cancelled') : ?>
                                                <i class="fa-solid fa-circle sale-status sale-status-cancelled"></i>
                                            <?php elseif ($capitalized_order_status === 'Ready') : ?>
                                                <i class="fa-solid fa-circle sale-status sale-status-ready"></i>
                                            <?php elseif ($capitalized_order_status === 'Transit') : ?>
                                                <i class="fa-solid fa-circle sale-status sale-status-transit"></i>    
                                            <?php endif; ?>
                                        <?php echo $capitalized_order_status; ?>
                                    </td>

                                      <td class="text-align-right">
                                      <?php 
                                        echo $all_product_names[0]; 
                                        if (count($all_product_names) > 1) {
                                            echo '<br><span class="rp-product-quantity-no">+' . (count($all_product_names) - 1) . ' more</span>';
                                        }
                                        ?>
                                    </td>
                                      <td class="text-align-right">
                                      <?php  echo $category_names; ?>
                                      </td>
                                      <td class="rp-product-amount text-align-right">
                                      <?php echo esc_html( $order_amount ); ?><br>
                                      <?php echo ( $payment_status ); ?>
                                      </td>
                                       <td class="text-align-right">
                                        <div class="d-flex viewbg">
                                        <a href="#" class="order-preview" data-order-id="<?php echo $order_id; ?>" title="Preview">
                                            <svg width="15" height="9" viewBox="0 0 15 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7.04315 0.0860729C4.56496 0.229609 2.22737 1.55658 0.364333 3.87659C-0.121932 4.48296 -0.121932 4.59134 0.367262 5.20357C2.22737 7.52651 4.57374 8.85055 7.06365 8.98823C9.87872 9.14056 12.5415 7.81065 14.6359 5.20064C15.1222 4.59427 15.1222 4.48589 14.633 3.87366C13.2738 2.1776 11.6568 1.01173 9.86993 0.440518C9.31336 0.261831 8.64255 0.132941 8.11528 0.100719C7.54113 0.0684967 7.4181 0.065568 7.04315 0.0860729ZM8.12113 1.45113C8.96184 1.60931 9.77033 2.18346 10.2097 2.93043C10.737 3.83265 10.7927 4.92236 10.3591 5.84509C10.1892 6.20539 10.0252 6.43974 9.7469 6.72681C8.17972 8.34086 5.51112 7.84873 4.60304 5.77771C4.27496 5.03074 4.2691 4.1168 4.58839 3.3376C4.89597 2.57891 5.56678 1.91689 6.33133 1.61517C6.91133 1.38668 7.49133 1.33396 8.12113 1.45113Z" fill="#9F9F9F"/>
                                            <path d="M7.1928 2.86892C6.71532 2.97144 6.2935 3.2673 6.0533 3.67155C5.87461 3.96741 5.81602 4.1871 5.81895 4.53862C5.81895 4.87842 5.85117 5.0161 5.98592 5.30024C6.11188 5.56095 6.47512 5.92418 6.74168 6.05307C7.68199 6.50711 8.77462 6.04428 9.11442 5.05125C9.21109 4.76711 9.21402 4.32185 9.12028 4.02599C8.90644 3.34932 8.28543 2.8777 7.57361 2.85134C7.43007 2.84548 7.25724 2.85427 7.1928 2.86892Z" fill="#9F9F9F"/>
                                            </svg>
                                        </a>
                                        </div>
                                    </td>
                                </tr>
                                <?php
                        endwhile;
                        wp_reset_postdata();
                        ?>
                        <!-- <tr>
                            <td colspan="6">No orders found.</td>
                        </tr> -->
                    <?php
                    endif;
                    ?>
                            </tbody>
                            </table>
                        </div>
                        </div>
                    </div>
                </div>
                <div class="rp-col-sm-3 rightbg">
                    <div class="flex justify-content-end">
                        <div class="input-group btn current-year-btn">
                            <span class="input-group-text">
                                <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3.48904 0.90815C3.32527 0.979355 3.2149 1.08616 3.12233 1.26061C3.05825 1.38166 3.04401 1.47779 3.03333 1.87297L3.01909 2.34293L2.81971 2.36429C1.60211 2.49602 0.640847 3.20806 0.202938 4.30462C-0.00355629 4.82441 3.95582e-06 4.76389 3.95582e-06 9.17858C3.95582e-06 11.7669 0.0142449 13.3049 0.0356063 13.4544C0.220739 14.6222 1.07876 15.587 2.22871 15.9181L2.50997 16H6.83566H11.1614L11.4426 15.9181C12.4644 15.6226 13.2298 14.8643 13.5538 13.8283L13.6535 13.5078L13.6642 9.34591C13.6713 5.69667 13.6678 5.14483 13.6179 4.86001C13.4541 3.91299 12.8097 3.06921 11.9232 2.64911C11.6455 2.51738 11.2005 2.39989 10.8516 2.36429L10.6522 2.34293L10.638 1.87297C10.6238 1.36742 10.5775 1.21433 10.3888 1.03988C10.1004 0.7693 9.60197 0.794222 9.32071 1.08972C9.14982 1.26773 9.11421 1.41014 9.11421 1.90146V2.34649H6.83566H4.55711V1.90146C4.55711 1.41014 4.52151 1.26773 4.35062 1.08972C4.13344 0.861867 3.77386 0.783542 3.48904 0.90815ZM3.02621 4.27258C3.02621 4.80305 3.06893 4.95614 3.27542 5.16263C3.64925 5.53646 4.22957 5.44745 4.46454 4.9775C4.54999 4.80305 4.55711 4.75321 4.55711 4.3331V3.87739H6.83566H9.11421V4.3331C9.11421 4.75321 9.12134 4.80305 9.20678 4.9775C9.44532 5.45457 10.0755 5.54002 10.4244 5.14127C10.6024 4.93834 10.6451 4.77101 10.6451 4.26545V3.86671L10.8267 3.89163C11.2575 3.94859 11.6633 4.20137 11.8948 4.56451C12.1226 4.91698 12.1404 5.02023 12.1404 6.02065V6.90359H6.8321H1.52735L1.53803 5.94945L1.54871 4.9953L1.66976 4.74965C1.80504 4.47551 2.03646 4.22273 2.28212 4.08032C2.44945 3.98064 2.76631 3.88451 2.93008 3.88095L3.02621 3.87739V4.27258ZM12.1404 10.8305C12.1404 13.4331 12.1404 13.4153 11.941 13.7606C11.8307 13.9493 11.5174 14.2448 11.3251 14.3445C10.9762 14.5225 10.9727 14.5225 6.83566 14.5225C2.69866 14.5225 2.6951 14.5225 2.3462 14.3445C2.15395 14.2448 1.84065 13.9493 1.73028 13.7606C1.53091 13.4153 1.53091 13.4331 1.53091 10.8305V8.43449H6.83566H12.1404V10.8305Z" fill="#414141"/>
                                </svg>                            
                            </span>                      
                            <select>
                                <option><?php echo __( 'Current year','restropress' ); ?></option>
                                <option><?php echo __( 'Weekly','restropress' ); ?></option>
                                <option><?php echo __( 'Monthly','restropress' ); ?></option>
                            </select>
                        </div>
                        <button type="button" class="btn btn-blue ml-3">
                            <svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M7.22906 0.0341387C7.07411 0.0798626 6.88359 0.252596 6.80992 0.412628L6.74896 0.539639V4.0756C6.74896 6.02139 6.74134 7.6141 6.72864 7.6141C6.71848 7.6141 6.33237 7.23561 5.87259 6.77329C5.41027 6.31098 4.98352 5.90454 4.92255 5.86898C4.77268 5.78007 4.49072 5.75721 4.31799 5.82326C4.17319 5.87914 3.99538 6.03917 3.92171 6.17888C3.84043 6.32876 3.84297 6.6666 3.9268 6.82664C4.00808 6.98667 6.96996 9.94854 7.12999 10.0298C7.2951 10.1162 7.62533 10.1162 7.79044 10.0298C7.95047 9.94854 10.9123 6.98667 10.9936 6.82664C11.0775 6.6666 11.08 6.32876 10.9987 6.17888C10.9251 6.03917 10.7472 5.87914 10.6024 5.82326C10.4297 5.75721 10.1477 5.78007 9.99788 5.86898C9.93691 5.90454 9.51016 6.31098 9.04784 6.77329C8.58807 7.23561 8.20195 7.6141 8.19179 7.6141C8.17909 7.6141 8.17147 6.02139 8.17147 4.0756V0.539639L8.11051 0.412628C7.96064 0.0849428 7.58215 -0.0750904 7.22906 0.0341387Z"
                                    fill="white" />
                                <path
                                    d="M1.52851 8.67848C1.28465 8.74199 1.06365 8.94266 0.997608 9.1662C0.949344 9.32623 0.941723 10.1848 0.984907 10.4998C1.16272 11.7775 2.1788 12.7936 3.45652 12.9714C3.73086 13.0095 11.1889 13.0095 11.4632 12.9714C12.741 12.7936 13.757 11.7775 13.9349 10.4998C13.978 10.1848 13.9704 9.32623 13.9222 9.1662C13.8739 9.00109 13.7062 8.81057 13.536 8.72929C13.2642 8.59974 12.9188 8.67594 12.7054 8.91472C12.5377 9.1027 12.5149 9.2043 12.5149 9.78601C12.5149 10.4973 12.4387 10.7487 12.1262 11.0841C11.9535 11.2695 11.7909 11.3813 11.5547 11.4727L11.3845 11.5387L7.53609 11.5464C3.76897 11.5515 3.68514 11.5515 3.48955 11.5006C3.22282 11.4346 3.03993 11.3254 2.82401 11.1095C2.48363 10.7665 2.40488 10.5176 2.40488 9.78601C2.40488 9.2043 2.38202 9.1027 2.21436 8.91472C2.04417 8.72675 1.74443 8.6226 1.52851 8.67848Z"
                                    fill="white" />
                            </svg>
                            <form id="rpress-export-payments" class="rpress-export-form rpress-import-export-form" method="post">
								<select name="order_status" style="display: none">
									<?php
									$statuses = rpress_get_order_statuses();
									foreach( $statuses as $status => $label ) {
										echo '<option value ="' . esc_attr( $status ). '">' . esc_html( $label ). '</option>';
									}
									?>
								</select>
								<?php wp_nonce_field( 'rpress_ajax_export', 'rpress_ajax_export' ); ?>
								<input type="hidden" name="rpress-export-class" value="RPRESS_Batch_Payments_Export"/>
								<input type="submit" value="<?php esc_html_e( 'Report', 'restropress' ); ?>" class="button-secondary"/>	 
							</form>
                        </button>
                    </div>
                    <div id="error-messages" style="color: red;"></div>
                    <div class="box mt-5">
                        <div class="flex justify-content-space-between items-center">
                            <div>
                                <h5 class="card-title"><?php echo __( 'Order Placed','restropress' ); ?></h5>
                            </div>
                            <div class="rp-order-dropdown">
                            <div class="custom-dropdown">
                                <i id="dropdownIcon" class="fa-solid fa-ellipsis"></i>
                            <select id="orderFrequency" class="custom-select">
                               <option value="monthly"><?php echo __( 'Monthly','restropress' ); ?></option>
                               <option value="weekly"><?php echo __( 'Weekly','restropress' ); ?></option>
                               <option value="yearly"><?php echo __( 'Yearly','restropress' ); ?></option>
                             </select>
                            </div>
                            </div>
                        </div>
                        <div id="chartContainer"></div>
                    </div>                                         
                    <div class="box mt-6">
                        <div class="flex items-top rp-add-product-wrap">
                            <div class="image-fit">
                                <svg width="30" height="31" viewBox="0 0 30 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.2353 1.19038C9.27647 1.84921 7.58824 2.42568 7.48824 2.4845C7.06471 2.69627 7.09412 2.3845 7.05882 8.10215L7.02941 13.2433L3.82353 14.3139C2.05882 14.9021 0.529412 15.4257 0.429412 15.4845C0.317647 15.5374 0.182353 15.6845 0.117647 15.8139C0 16.0374 0 16.1492 0 21.5492C0 26.9492 0 27.061 0.117647 27.2845C0.182353 27.4139 0.317647 27.561 0.429412 27.6139C0.723529 27.7669 7.77647 30.108 7.94118 30.108C8.02353 30.108 9.64118 29.5904 11.5412 28.9551L15 27.8021L18.4588 28.9551C20.3588 29.5904 21.9765 30.108 22.0588 30.108C22.2235 30.108 29.2765 27.7669 29.5706 27.6139C29.6824 27.561 29.8176 27.4139 29.8824 27.2845C30 27.061 30 26.9492 30 21.5492C30 16.1492 30 16.0374 29.8824 15.8139C29.8176 15.6845 29.6824 15.5374 29.5706 15.4845C29.4706 15.4257 27.9412 14.9021 26.1765 14.3139L22.9706 13.2433L22.9412 8.10215C22.9059 2.3845 22.9353 2.69627 22.5118 2.4845C22.1706 2.30215 15.1529 -0.00961494 14.9706 -0.00373268C14.8765 -0.00373268 13.1941 0.537443 11.2353 1.19038ZM17.1 2.50215C18.2412 2.8845 19.1765 3.20803 19.1765 3.22568C19.1765 3.24333 18.2353 3.56685 17.0882 3.94921L15 4.64921L12.9118 3.94921C11.7647 3.56685 10.8235 3.24333 10.8235 3.22568C10.8235 3.19627 14.8529 1.82568 14.9706 1.8198C15 1.81391 15.9588 2.12568 17.1 2.50215ZM11.5588 5.36097L14.0882 6.20803L14.1059 10.6021C14.1176 14.7727 14.1118 14.9963 14.0176 14.9669C13.9588 14.9492 12.7765 14.5551 11.3824 14.0904L8.85294 13.2433L8.83529 8.84921C8.82353 4.67862 8.82941 4.45509 8.92353 4.4845C8.98235 4.50215 10.1706 4.89627 11.5588 5.36097ZM21.1647 8.85509L21.1471 13.2433L18.6176 14.0904C17.2294 14.5551 16.0412 14.9492 15.9824 14.9669C15.8882 14.9963 15.8824 14.7727 15.8941 10.6021L15.9118 6.20803L18.5 5.33744C19.9235 4.86097 21.1059 4.46686 21.1353 4.46686C21.1588 4.46097 21.1706 6.43744 21.1647 8.85509ZM10.0412 15.5021C11.1824 15.8845 12.1176 16.208 12.1176 16.2257C12.1176 16.2433 11.1765 16.5669 10.0294 16.9492L7.94118 17.6492L5.85294 16.9492C4.70588 16.5669 3.76471 16.2433 3.76471 16.2257C3.76471 16.1963 7.79412 14.8257 7.91177 14.8198C7.94118 14.8139 8.9 15.1257 10.0412 15.5021ZM24.1588 15.5021C25.3 15.8845 26.2353 16.208 26.2353 16.2257C26.2353 16.2433 25.2941 16.5669 24.1471 16.9492L22.0588 17.6492L19.9706 16.9492C18.8235 16.5669 17.8824 16.2433 17.8824 16.2257C17.8824 16.1963 21.9118 14.8257 22.0294 14.8198C22.0588 14.8139 23.0176 15.1257 24.1588 15.5021ZM4.5 18.361L7.02941 19.208L7.04706 23.6021C7.05882 27.7727 7.05294 27.9963 6.95882 27.9669C6.9 27.9492 5.71765 27.5551 4.32353 27.0904L1.79412 26.2433L1.77647 21.8492C1.76471 17.6786 1.77059 17.4551 1.86471 17.4845C1.92353 17.5021 3.11176 17.8963 4.5 18.361ZM14.1059 21.8551L14.0882 26.2433L11.5588 27.0904C10.1706 27.5551 8.98235 27.9492 8.92353 27.9669C8.82941 27.9963 8.82353 27.7727 8.83529 23.6021L8.85294 19.208L11.4412 18.3374C12.8647 17.861 14.0471 17.4669 14.0765 17.4669C14.1 17.461 14.1118 19.4374 14.1059 21.8551ZM18.6176 18.361L21.1471 19.208L21.1647 23.6021C21.1765 27.7727 21.1706 27.9963 21.0765 27.9669C21.0176 27.9492 19.8353 27.5551 18.4412 27.0904L15.9118 26.2433L15.8941 21.8492C15.8824 17.6786 15.8882 17.4551 15.9824 17.4845C16.0412 17.5021 17.2294 17.8963 18.6176 18.361ZM28.2235 21.8551L28.2059 26.2433L25.6765 27.0904C24.2882 27.5551 23.1 27.9492 23.0412 27.9669C22.9471 27.9963 22.9412 27.7727 22.9529 23.6021L22.9706 19.208L25.5588 18.3374C26.9824 17.861 28.1647 17.4669 28.1941 17.4669C28.2176 17.461 28.2294 19.4374 28.2235 21.8551Z" fill="#030043"/>
                                </svg>                            
                            </div>
                            <div class="ml-3">
                             <?php
                             $post_type = "fooditem";
                             $count_posts = wp_count_posts( $post_type );
                             ?>
                                <div class="card-title rp-product-hd"><?php echo __( 'Total Product','restropress' ); ?></div>
                                <div class="rp-product-no"><?php echo $count_posts->publish; ?></div>
                            </div>
                        </div> 
                        <div class="text-align-center">
                        <?php
                        $home_url = home_url();
                        ?>
                        <a href="<?php echo $home_url;?>/wp-admin/post-new.php?post_type=fooditem">                         
                            <button type="button" class="btn btn-blue mt-5 add-product-btn">
                           
                                <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.70955 0.049839C5.63122 0.0792131 5.50394 0.16407 5.42888 0.239136C5.17759 0.490443 5.18412 0.402323 5.18412 2.93824V5.18369H2.93881C0.403046 5.18369 0.491161 5.17717 0.239869 5.42847C-0.0799565 5.74832 -0.0799565 6.25093 0.239869 6.57078C0.491161 6.82209 0.403046 6.81556 2.93881 6.81556H5.18412V9.06101C5.18412 11.5969 5.17759 11.5088 5.42888 11.7601C5.74871 12.08 6.25129 12.08 6.57112 11.7601C6.82241 11.5088 6.81588 11.5969 6.81588 9.06101V6.81556H9.06119C11.597 6.81556 11.5088 6.82209 11.7601 6.57078C12.08 6.25093 12.08 5.74832 11.7601 5.42847C11.5088 5.17717 11.597 5.18369 9.06119 5.18369H6.81588V2.93824C6.81588 0.402323 6.82241 0.490443 6.57112 0.239136C6.34593 0.0106745 6.01958 -0.0578642 5.70955 0.049839Z" fill="white"/>
                                </svg>
                                <?php echo __( 'Add Product','restropress' ); ?>
                            </button> 
                            </a>    
                        </div>               
                    </div>
                    <?php
                      $test = rpress_get_fooditem_earnings_stats(27);
                     ?>                                    
                <div class="mt-6">
                    <div class="flex justify-content-space-between items-center page-header">
                            <h2 class="page-title"><?php echo __( 'Best Selling Product','restropress' ); ?></h2>                                               
                        </div>
                            <?php
                                $data =[];
                                $post_id = get_the_ID();
                                $args = array(
                                'post_type' => 'fooditem', 
                                'posts_per_page' => -1, 
                                );
                        
                                $custom_query = new WP_Query($args);
                        
                                if ($custom_query->have_posts()) :
                                while ($custom_query->have_posts()) : $custom_query->the_post();
                                $post_id = get_the_ID();
                                $earning = rpress_get_fooditem_earnings_stats($post_id);
                                $food_data =array(
                                'post_id' => $post_id,
                                'earning' => $earning,
                                
                                );
                                array_push($data, $food_data);
                                endwhile;
                                wp_reset_postdata();
                                else :
                                endif;
                                function sortByEarningDesc($a, $b) {
                                return $b['earning'] - $a['earning'];
                                }
                                usort($data, 'sortByEarningDesc');
                                $data = array_slice($data, 0, 5);
                        
                                ?>
                            <?php foreach ( $data as $product ) : ?>
                            <?php $post_title = get_the_title( $product[ 'post_id' ] ); ?>
                            <?php $terms = get_the_terms( $product[ 'post_id' ], "food-category" ); 
                                $terms_name = isset($terms[0]->name);
                            ?>
                            <?php $image_url = get_the_post_thumbnail_url($product['post_id'], 'full');?>
                            <?php $sales_count  = get_post_meta($product['post_id'], '_rpress_fooditem_sales', true);?>

                            <div class="rp-bestselling-product-wrap mt-6">
                              <div class="flex items-center">
                                <div class="flex items-center rp-bestselling-product-image">
                                    <img src="<?php echo esc_html( $image_url ); ?>">
                                </div>
                                <div class="mr-auto ml-3">
                                    <div class="rp-bestselling-product-name"><?php echo esc_html($post_title); ?></div>
                                    <div class="rp-bestselling-product-description"><?php echo esc_html($terms_name); ?></div>
                                </div>
                                <div class="rp-sale-stock-no"><?php echo esc_html( $sales_count ); ?></div>
                            
                                <?php 
                                
                                                                
                                $stock = get_post_meta($product['post_id'],'rp_item_stock', true) ;
                                $stock_class = ($stock > 0) ? "rp-sale-stock" : "rp-sale-out-of-stock";
                                if(class_exists('RP_Inventory')){
                                    ?>
                                    <div class="flex items-center <?php echo esc_html($stock_class); ?>">
                                    <i class="fa fa-circle text-warning me-1"></i>Stock
                                </div>
                                <?php

                                }

                            ?>
                            
                                
                            </div>
                            <?php endforeach; ?>
                        </div>
                    
                    <div class="box mt-6 rp-customer-information-wrap">
                        <div class="flex justify-content-space-between">
                            <div>
                                <h5 class="card-title"><?php echo __( 'Customers','restropress' ); ?></h5>
                                <div class="rp-customer-information-desc"><?php echo __( 'Customers Information','restropress' ); ?></div>
                            </div>
                            <div>
                                <select id="customersdata">
                                    <option value="monthly"><?php echo __( 'Monthly','restropress' ); ?></option>
                                    <option value="weekly"><?php echo __( 'Weekly','restropress' ); ?></option>
                                    <option value="yearly"><?php echo __( 'Yearly','restropress' ); ?></option>
                                </select>
                            </div>
                        </div>
                        <?php 
                            global $wpdb;
                            $today_date         = date( 'Y-m-d' );
                            $yesterday_date     = date( "Y-m-d", strtotime( "-1 day" ) );
                            $table_name         = $wpdb->prefix . 'rpress_customers';
                            
                            $query_today = $wpdb->prepare("
                                SELECT COUNT(*) 
                                FROM $table_name 
                                WHERE DATE(date_created) LIKE %s", 
                                array( "$today_date%" )
                            );
                        
                            $customer_count = $wpdb->get_var( $query_today );
                    
                            $query_yesterday = $wpdb->prepare("
                                SELECT COUNT(*) 
                                FROM $table_name 
                                WHERE DATE(date_created) LIKE %s", 
                                array( "$yesterday_date%" )
                            );
                        
                            $customer_count_yesterday = $wpdb->get_var( $query_yesterday );
                    
                            $percentage_change_customer = 0;
                            if ( $customer_count_yesterday != 0 ) {
                            $percentage_change_customer = (  ( $customer_count - $customer_count_yesterday )  / $customer_count_yesterday ) * 100;
                            }  
                        ?>
                        <div class="rp-customer-information-list mt-5 flex items-center">
                            <div>
                                <div class="mt-5">
                                    <p class="rp-customer-type"><?php echo __( 'Total Customer','restropress' ); ?></p>
                                    <span class="rp-customer-rate" id="customer-data"><?php echo $customer_count ?></span> 
                                </div>
                                <div class="mt-5">
                                    <p class="rp-customer-type"><?php echo __( 'New Customer','restropress' ); ?></p>
                                    <span class="rp-customer-rate" id="new-customer"><?php echo $percentage_change_customer ?>%</span> 
                                </div>
                            </div>
                            <div id="rp-customer-information-graph" >
                                
                            </div>
                        </div>                       
                    </div> 
                    </div>
                </div>
            </div>
        </div>
    </div>
<!----year-select-box-js---->
<script type="text/template" id="tmpl-rp-modal-view-order">
    <div class="rp-backbone-modal rp-order-preview">
        <div class="rp-backbone-modal-content">
            <section class="rp-backbone-modal-main" role="main">
                <header class="rp-backbone-modal-header">
                    <mark class="order-status status-{{ data.status }}">
                        <span>{{ data.status }}</span>
                    </mark>

                    <h1>Order #{{ data.id }}</h1>

                    <# if (data.service_type_slug !== '') { #>
                        <mark class="service-type badge-{{ data.service_type_slug }}">
                            <span>{{ data.service_type }}</span>
                        </mark>
                    <# } #>

                    <button class="modal-close modal-close-link dashicons dashicons-no-alt">
                        <span class="screen-reader-text">Close modal panel</span>
                    </button>
                </header>

                <article>
                    <div class="rp-order-preview-wrapper">
                        <div class="rp-order-preview">
                            <# if (data.customer_details.address) { #>
                                <div class="rp-order-preview-address">
                                    <h2>{{ data.service_type }} address</h2>
                                    {{ data.customer_details.address }}<br />
                                    {{ data.customer_details.flat }}<br />
                                    {{ data.customer_details.city }} {{ data.customer_details.postcode }}
                                </div>
                            <# } #>

                            <div class="rp-order-preview-customer-details">
                                <h2>Customer details</h2>
                                <# if (data.customer_name) { #>
                                    <strong>Customer name</strong>:
                                    <span>{{ data.customer_name }}</span>
                                    <br/>
                                <# } #>

                                <# if (data.customer_email) { #>
                                    <strong>Email</strong>:
                                    <a href="mailto:{{ data.customer_email }}">{{ data.customer_email }}</a>
                                    <br/>
                                <# } #>

                                <# if (data.customer_details.phone) { #>
                                    <strong>Phone</strong>:
                                    <a href="tel:{{{ data.customer_details.phone }}}">{{{ data.customer_details.phone }}}</a>
                                    <br/>
                                <# } #>
                            </div>

                            <div class="rp-clear-fix"></div>

                            <div class="order-service-meta">
                                <# if (data.payment_via) { #>
                                    <span>
                                        <strong>Payment via</strong>:
                                        {{{ data.payment_via }}}
                                    </span>
                                <# } #>

                                <# if (data.service_date) { #>
                                    <span>
                                        <strong>Service date</strong>:
                                        {{{ data.service_date }}}
                                    </span>
                                <# } #>

                                <# if (data.service_time) { #>
                                    <span>
                                        <strong>Service time</strong>:
                                        {{{ data.service_time }}}
                                    </span>
                                <# } #>
                            </div>
                        </div>
                        <br/>
                        <# if (data.item_html) { #>
                            <div class="fooditems">
                                {{{ data.item_html }}}
                            </div>
                        <# } #>
                    </div>
                </article>
            </section>
        </div>
    </div>
    <div class="rp-backbone-modal-backdrop modal-close"></div>
</script>
